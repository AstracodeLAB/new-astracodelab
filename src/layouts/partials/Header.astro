---
import Logo from '../components/Logo.astro';
import Cta from '../components/Cta.astro';
---

<header class='header header__text'>
	<nav class='navigation'>
		<div class='navigation__container'>
			<div class='navigation__container-logo'>
				<Logo />
			</div>

			<input id='nav-toggle' type='checkbox' class='navigation__container-toggle' />
			<label for='nav-toggle' class='navigation__container-button navigation__container-button--open'>
				<svg class='navigation__container-button-icon' viewBox='0 0 20 20'>
					<title>Menu Open</title>
					<path d='M0 3h20v2H0V3z m0 6h20v2H0V9z m0 6h20v2H0V0z'></path>
				</svg>
			</label>
			<ul id='nav-menu' class='navigation__container-menu'>
				<li class='navigation__container-menu-item navigation__container-menu-item-close'>
					<label for='nav-toggle' class='navigation__container-button navigation__container-button--close'>
						<svg class='navigation__container-button-icon' viewBox='0 0 20 20'>
							<title>Menu Close</title>
							<polygon
								points='11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2'
								transform='rotate(45 10 10)'></polygon>
						</svg>
					</label>
				</li>

				<li class='navigation__container-menu-itemsMap'>
					<a href='' class='navigation__container-menu-itemsMap-link'>inicio</a>
				</li>

				<li class='navigation__container-menu-itemsMap'>
					<a href='' class='navigation__container-menu-itemsMap-link'>
						servicios
						<svg
							class='navigation__container-menu-itemsMap-arrow'
							viewBox='0 0 20 20'
							xmlns='http://www.w3.org/2000/svg'
						>
							<path d='M5 7l5 5 5-5H5z'></path>
						</svg>
					</a>
					<!-- Submenú  -->
					<ul class='navigation__container-submenu'>
						<li class='navigation__container-submenu-item'>
							<a href='/portfolios' class='navigation__container-menu-itemsMap-linkSubmenu'
								>portfolios y proyectos creativos</a
							>
						</li>
						<li class='navigation__container-submenu-item'>
							<a href='/corporativo' class='navigation__container-menu-itemsMap-linkSubmenu'>sitios web corporativos</a>
						</li>
						<li class='navigation__container-submenu-item'>
							<a href='#' class='navigation__container-menu-itemsMap-linkSubmenu'>nuevas funcionalidades</a>
						</li>
						<li class='navigation__container-submenu-item'>
							<a href='#' class='navigation__container-menu-itemsMap-linkSubmenu'>mantenimiento web</a>
						</li>
					</ul>
				</li>

				<li class='navigation__container-menu-itemsMap'>
					<a href='' class='navigation__container-menu-itemsMap-link'>contacto</a>
				</li>

				<li class='navigation__container-menu-itemsMap'>
					<a href='' class='navigation__container-menu-itemsMap-link'>proyectos</a>
				</li>

				<li class='navigation__container-menu-itemsMap'>
					<a href='' class='navigation__container-menu-itemsMap-link'>sobre nosotras</a>
				</li>
			</ul>

			<div class='button-header'>
				<Cta />
			</div>
		</div>
	</nav>
</header>

<!-- <script>
  document.addEventListener('DOMContentLoaded', function () {
    const menuItemsWithSubmenus = document.querySelectorAll('.navigation__container-menu-itemsMap');

    menuItemsWithSubmenus.forEach((item) => {
      const submenu = item.querySelector('.navigation__container-submenu') as HTMLElement;
      const arrowIcon = item.querySelector('.navigation__container-menu-itemsMap-arrow') as SVGElement;

      if (submenu && arrowIcon) {
        item.addEventListener('click', function (event) {
          event.stopPropagation();

          submenu.classList.toggle('open');

          if (submenu.classList.contains('open')) {
            arrowIcon.style.transform = 'rotate(180deg)';
          } else {
            arrowIcon.style.transform = 'rotate(0deg)';
          }
        });
      }
    });

    document.addEventListener('click', function () {
      const openSubmenus = document.querySelectorAll('.navigation__container-submenu.open');
      openSubmenus.forEach((openSubmenu) => {
        openSubmenu.classList.remove('open');


        const arrowIcon = openSubmenu.parentElement?.querySelector(
          '.navigation__container-menu-itemsMap-arrow'
        ) as SVGElement;
        if (arrowIcon) {
          arrowIcon.style.transform = 'rotate(0deg)';
        }
      });
    });
  });
</script> -->

<script>
	document.addEventListener('DOMContentLoaded', function () {
		const menuItemsWithSubmenus = document.querySelectorAll('.navigation__container-menu-itemsMap');

		menuItemsWithSubmenus.forEach((item) => {
			const submenu = item.querySelector('.navigation__container-submenu') as HTMLElement | null;
			const arrowIcon = item.querySelector('.navigation__container-menu-itemsMap-arrow') as SVGElement | null;

			if (submenu && arrowIcon) {
				// Al hacer clic en el elemento principal del menú
				item.addEventListener('click', function (event) {
					event.preventDefault(); // Evita que el enlace recargue la página.

					// Cierra cualquier otro submenú abierto
					document.querySelectorAll('.navigation__container-submenu.open').forEach((openSubmenu) => {
						if (openSubmenu !== submenu) {
							openSubmenu.classList.remove('open');

							const openArrow = openSubmenu.parentElement?.querySelector(
								'.navigation__container-menu-itemsMap-arrow'
							) as SVGElement | null;
							if (openArrow) {
								openArrow.style.transform = 'rotate(0deg)';
							}
						}
					});

					// Alterna el submenú actual
					submenu.classList.toggle('open');
					arrowIcon.style.transform = submenu.classList.contains('open') ? 'rotate(180deg)' : 'rotate(0deg)';
				});
			}
		});

		// Cierra todos los submenús al hacer clic fuera del menú
		document.addEventListener('click', function (event) {
			const isClickInsideMenu = (event.target as HTMLElement).closest('.navigation__container-menu');

			if (!isClickInsideMenu) {
				document.querySelectorAll('.navigation__container-submenu.open').forEach((openSubmenu) => {
					openSubmenu.classList.remove('open');

					const openArrow = openSubmenu.parentElement?.querySelector(
						'.navigation__container-menu-itemsMap-arrow'
					) as SVGElement | null;
					if (openArrow) {
						openArrow.style.transform = 'rotate(0deg)';
					}
				});
			}
		});
	});
</script>
