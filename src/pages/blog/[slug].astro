---
import Layout from '../../layouts/Layout.astro';
// import { posts } from '../../data/posts.js';
import TitleSecondary from '../../layouts/components/Titles/TitleSecondary.astro';
import Buttons from '../../layouts/components/Buttons/Buttons.astro';
import { getCollection, render } from 'astro:content';
import BlogDate from '../../layouts/components/Titles/BlogDate.astro';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);

const title = `${post.data.title} | Astracodelab`;
const description = post.data.excerpt;
const permalink = Astro.url.href;
const robots = 'index, follow';

---

<Layout title={title} description={description} permalink={permalink} robots={robots}>
  <main class='post-detail'>
    <div class='container-post-detail'>
      <Buttons className='linkPrimary' href='/blog/1/'>‚Üê Volver al listado</Buttons>
      <section class='header-post-detail'>
        <div class='post-date-container'>
          <span class='date'>
            {post.data.date.toLocaleDateString('es-ES', { day: 'numeric', month: 'short', year: 'numeric' })}
          </span>
        </div>

        <TitleSecondary text={post.data.title} />
        <img src={post.data.image} alt={post.data.title} class='post-detail-image' />
      </section>

      <section class='content'>
        <div class='post-content'>
          <Content />
        </div>
      </section>
    </div>
  </main>
</Layout>
